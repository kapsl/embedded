   1               		.file	"button.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__RAMPZ__ = 0x3b
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.text
   9               	.Ltext0:
  10               		.cfi_sections	.debug_frame
  11               	.global	initializeButton
  13               	initializeButton:
  14               	.LFB0:
  15               		.file 1 "button.c"
   1:button.c      **** #include "button.h"
   2:button.c      **** #include "tools.h"
   3:button.c      **** 
   4:button.c      **** void initializeButton() {
  16               		.loc 1 4 0
  17               		.cfi_startproc
  18               	/* prologue: function */
  19               	/* frame size = 0 */
  20               	/* stack size = 0 */
  21               	.L__stack_usage = 0
   5:button.c      **** 	// Set pull up resistor
   6:button.c      **** 	PORTB = (1 << PORTB4);
  22               		.loc 1 6 0
  23 0000 80E1      		ldi r24,lo8(16)
  24 0002 85B9      		out 0x5,r24
   7:button.c      **** 	PORTH = (1 << PORTH6);
  25               		.loc 1 7 0
  26 0004 80E4      		ldi r24,lo8(64)
  27 0006 8093 0201 		sts 258,r24
  28 000a 0895      		ret
  29               		.cfi_endproc
  30               	.LFE0:
  32               	.global	button_pressed
  34               	button_pressed:
  35               	.LFB1:
   8:button.c      **** }
   9:button.c      **** 
  10:button.c      **** uint8_t button_pressed(uint8_t button) {
  36               		.loc 1 10 0
  37               		.cfi_startproc
  38               	.LVL0:
  39               	/* prologue: function */
  40               	/* frame size = 0 */
  41               	/* stack size = 0 */
  42               	.L__stack_usage = 0
  11:button.c      **** 	// If bitmask says that both buttons should be pressed
  12:button.c      **** 	if (button == SW12_PRESSED && (PINB & button) == 0x00 && (PINH & button) == 0x00) {
  43               		.loc 1 12 0
  44 000c 93B1      		in r25,0x3
  45 000e 9823      		and r25,r24
  46 0010 01F4      		brne .L3
  47               		.loc 1 12 0 is_stmt 0 discriminator 1
  48 0012 9091 0001 		lds r25,256
  49 0016 9823      		and r25,r24
  50 0018 01F0      		breq .L6
  51               	.L3:
  13:button.c      **** 		return 1;
  14:button.c      **** 	} else if (button == (1 << PORTB4) && (PINB & button) == 0x00) {
  52               		.loc 1 14 0 is_stmt 1
  53 001a 8031      		cpi r24,lo8(16)
  54 001c 01F4      		brne .L5
  55               		.loc 1 14 0 is_stmt 0 discriminator 1
  56 001e 83B1      		in r24,0x3
  57               	.LVL1:
  58 0020 8295      		swap r24
  59 0022 8170      		andi r24,1
  60 0024 91E0      		ldi r25,lo8(1)
  61 0026 8927      		eor r24,r25
  62 0028 0895      		ret
  63               	.LVL2:
  64               	.L5:
  15:button.c      **** 		return 1;
  16:button.c      **** 	} else if (button == (1 << PORTH6) && (PINH & button) == 0x00) {
  65               		.loc 1 16 0 is_stmt 1
  66 002a 8034      		cpi r24,lo8(64)
  67 002c 01F4      		brne .L7
  68               		.loc 1 16 0 is_stmt 0 discriminator 1
  69 002e 8091 0001 		lds r24,256
  70               	.LVL3:
  71 0032 86FB      		bst r24,6
  72 0034 8827      		clr r24
  73 0036 80F9      		bld r24,0
  74 0038 91E0      		ldi r25,lo8(1)
  75 003a 8927      		eor r24,r25
  76 003c 0895      		ret
  77               	.LVL4:
  78               	.L6:
  13:button.c      **** 		return 1;
  79               		.loc 1 13 0 is_stmt 1
  80 003e 81E0      		ldi r24,lo8(1)
  81               	.LVL5:
  82 0040 0895      		ret
  83               	.LVL6:
  84               	.L7:
  17:button.c      **** 		return 1;
  18:button.c      **** 	} 
  19:button.c      **** 	
  20:button.c      **** 	return 0;
  85               		.loc 1 20 0
  86 0042 80E0      		ldi r24,0
  87               	.LVL7:
  21:button.c      **** }
  88               		.loc 1 21 0
  89 0044 0895      		ret
  90               		.cfi_endproc
  91               	.LFE1:
  93               	.global	button_wait
  95               	button_wait:
  96               	.LFB2:
  22:button.c      **** 
  23:button.c      **** void button_wait(uint8_t button) {
  97               		.loc 1 23 0
  98               		.cfi_startproc
  99               	.LVL8:
 100 0046 CF93      		push r28
 101               	.LCFI0:
 102               		.cfi_def_cfa_offset 4
 103               		.cfi_offset 28, -3
 104               	/* prologue: function */
 105               	/* frame size = 0 */
 106               	/* stack size = 1 */
 107               	.L__stack_usage = 1
 108 0048 C82F      		mov r28,r24
 109               	.LVL9:
 110               	.L10:
  24:button.c      **** 	uint8_t flag = 1;
  25:button.c      **** 	
  26:button.c      **** 	while (flag) {
  27:button.c      **** 		if (button_pressed(button)) {
 111               		.loc 1 27 0
 112 004a 8C2F      		mov r24,r28
 113 004c 0E94 0000 		call button_pressed
 114               	.LVL10:
 115 0050 8823      		tst r24
 116 0052 01F0      		breq .L10
 117               	/* epilogue start */
  28:button.c      **** 			flag = 0;
  29:button.c      **** 		}
  30:button.c      **** 	}
  31:button.c      **** }
 118               		.loc 1 31 0
 119 0054 CF91      		pop r28
 120               	.LVL11:
 121 0056 0895      		ret
 122               		.cfi_endproc
 123               	.LFE2:
 125               	.Letext0:
 126               		.file 2 "/usr/lib/avr/include/stdint.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 button.c
     /tmp/ccGdHz1I.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/ccGdHz1I.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/ccGdHz1I.s:4      *ABS*:000000000000003f __SREG__
     /tmp/ccGdHz1I.s:5      *ABS*:000000000000003b __RAMPZ__
     /tmp/ccGdHz1I.s:6      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccGdHz1I.s:7      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccGdHz1I.s:13     .text:0000000000000000 initializeButton
     /tmp/ccGdHz1I.s:34     .text:000000000000000c button_pressed
     /tmp/ccGdHz1I.s:95     .text:0000000000000046 button_wait

NO UNDEFINED SYMBOLS
